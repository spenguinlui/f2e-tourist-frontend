(function(t){function e(e){for(var o,a,i=e[0],s=e[1],u=e[2],d=0,l=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&l.push(c[a][0]),c[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);f&&f(e);while(l.length)l.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},a={app:0},c={app:0},r=[];function i(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-0869ec0d":"8438b303","chunk-13cea410":"04b9a4dc","chunk-2322d342":"1d120826","chunk-40f71f90":"64b9317b","chunk-5605ba13":"f54edd63","chunk-5c9e3b18":"5e079c2b","chunk-646064e5":"be3a83c6","chunk-6dd00220":"bd29987c","chunk-6fd9a691":"b4d7bdb7","chunk-791859f9":"8eaabfa4","chunk-98d7d4d2":"c3943305","chunk-b70701f4":"802a30fc","chunk-cc1715d8":"813ec2d4","chunk-0d793f91":"d6269ec8","chunk-25e1cb46":"991af3ad","chunk-3b8eb828":"02c5cdc9","chunk-53d3590d":"5227b315","chunk-602d4d1e":"73e5aadd","chunk-2d0ba31c":"96d28a1a","chunk-2d0c4832":"da34ee07","chunk-2d225015":"e51bae1b","chunk-2d2255d9":"6814c4e6","chunk-d09e6ff4":"9306bf0d","chunk-d681fd62":"d8472227"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-0869ec0d":1,"chunk-13cea410":1,"chunk-2322d342":1,"chunk-40f71f90":1,"chunk-5605ba13":1,"chunk-5c9e3b18":1,"chunk-646064e5":1,"chunk-6dd00220":1,"chunk-6fd9a691":1,"chunk-791859f9":1,"chunk-98d7d4d2":1,"chunk-b70701f4":1,"chunk-cc1715d8":1,"chunk-0d793f91":1,"chunk-25e1cb46":1,"chunk-3b8eb828":1,"chunk-53d3590d":1,"chunk-602d4d1e":1,"chunk-d09e6ff4":1,"chunk-d681fd62":1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=new Promise((function(e,n){for(var o="css/"+({}[t]||t)+"."+{"chunk-0869ec0d":"96cd151b","chunk-13cea410":"cca007c7","chunk-2322d342":"3faea030","chunk-40f71f90":"a96fb106","chunk-5605ba13":"ed487e84","chunk-5c9e3b18":"7da9f70c","chunk-646064e5":"1544ad35","chunk-6dd00220":"ef91df06","chunk-6fd9a691":"4a046b09","chunk-791859f9":"cdae2fdf","chunk-98d7d4d2":"e4e71a42","chunk-b70701f4":"dae30ede","chunk-cc1715d8":"d3fb6bbe","chunk-0d793f91":"111ab81a","chunk-25e1cb46":"5b99f5fc","chunk-3b8eb828":"99e3f3bc","chunk-53d3590d":"ad1be20d","chunk-602d4d1e":"5e11eb37","chunk-2d0ba31c":"31d6cfe0","chunk-2d0c4832":"31d6cfe0","chunk-2d225015":"31d6cfe0","chunk-2d2255d9":"31d6cfe0","chunk-d09e6ff4":"6a432b13","chunk-d681fd62":"bc7d53ef"}[t]+".css",c=s.p+o,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var u=r[i],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===o||d===c))return e()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){u=l[i],d=u.getAttribute("data-href");if(d===o||d===c)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var o=e&&e.target&&e.target.src||c,r=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete a[t],f.parentNode.removeChild(f),n(r)},f.href=c;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){a[t]=0})));var o=c[t];if(0!==o)if(o)e.push(o[2]);else{var r=new Promise((function(e,n){o=c[t]=[e,n]}));e.push(o[2]=r);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(t);var l=new Error;u=function(e){d.onerror=d.onload=null,clearTimeout(f);var n=c[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",l.name="ChunkLoadError",l.type=o,l.request=a,n[1](l)}c[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/f2e-tourist-frontend/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var f=d;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"021d":function(t,e,n){t.exports=n.p+"img/search.9670b5cc.svg"},"039b":function(t,e,n){"use strict";n("2b8f")},1258:function(t,e,n){"use strict";n("3b0c")},"16ee":function(t,e,n){"use strict";n.d(e,"h",(function(){return r})),n.d(e,"n",(function(){return i})),n.d(e,"j",(function(){return s})),n.d(e,"k",(function(){return u})),n.d(e,"s",(function(){return d})),n.d(e,"w",(function(){return l})),n.d(e,"y",(function(){return f})),n.d(e,"x",(function(){return h})),n.d(e,"v",(function(){return m})),n.d(e,"i",(function(){return p})),n.d(e,"d",(function(){return v})),n.d(e,"r",(function(){return T})),n.d(e,"f",(function(){return g})),n.d(e,"t",(function(){return A})),n.d(e,"u",(function(){return _})),n.d(e,"e",(function(){return D})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return k})),n.d(e,"q",(function(){return E})),n.d(e,"a",(function(){return S})),n.d(e,"g",(function(){return y})),n.d(e,"o",(function(){return O})),n.d(e,"l",(function(){return P})),n.d(e,"p",(function(){return L})),n.d(e,"m",(function(){return I}));n("99af");var o=n("bc3a"),a=n.n(o),c=function(){var t="https://f2e-tourist-backend.herokuapp.com";return"".concat(t,"/api/v1")}(),r=function(t){return a()({method:"get",url:"".concat(c,"/local_item/").concat(t)})},i=function(){return a()({method:"get",url:"".concat(c,"/themes")})},s=function(){return a()({method:"get",url:"".concat(c,"/hots")})},u=function(t){return a()({method:"post",url:"".concat(c,"/local_items/average_scores"),header:{"Content-Type":"application/json"},data:t})},d=function(t,e){return a()({method:"post",url:"".concat(c,"/count/").concat(e),header:{"Content-Type":"application/json"},data:t})},l=function(t){return a()({method:"post",url:"".concat(c,"/user/sign_in"),header:{"Content-Type":"application/json"},data:t})},f=function(t){return a()({method:"post",url:"".concat(c,"/user/sign_up"),header:{"Content-Type":"application/json"},data:t})},h=function(t){return a()({method:"delete",url:"".concat(c,"/user/sign_out"),header:{"Content-Type":"application/json"},data:t})},m=function(t){return a()({method:"post",url:"".concat(c,"/user/check"),header:{"Content-Type":"application/json"},data:t})},p=function(t){return a()({method:"post",url:"".concat(c,"/user/favorites"),header:{"Content-Type":"application/json"},data:t})},v=function(t){return a()({method:"patch",url:"".concat(c,"/user/favorite/update"),header:{"Content-Type":"application/json"},data:t})},T=function(t,e){return a()({method:"post",url:"".concat(c,"/local_item/").concat(e,"/comment"),header:{"Content-Type":"application/json"},data:t})},g=function(t){return a()({method:"post",url:"".concat(c,"/supplier/check"),header:{"Content-Type":"application/json"},data:t})},A=function(t){return a()({method:"post",url:"".concat(c,"/supplier/sign_in"),header:{"Content-Type":"application/json"},data:t})},_=function(t){return a()({method:"delete",url:"".concat(c,"/supplier/sign_out"),header:{"Content-Type":"application/json"},data:t})},D=function(t){return a()({method:"post",url:"".concat(c,"/admin/check"),header:{"Content-Type":"application/json"},data:t})},b=function(t){return a()({method:"post",url:"".concat(c,"/admin/sign_in"),header:{"Content-Type":"application/json"},data:t})},k=function(t){return a()({method:"delete",url:"".concat(c,"/admin/sign_out"),header:{"Content-Type":"application/json"},data:t})},E=function(t,e){return a()({method:"patch",url:"".concat(c,"/admin/themes/").concat(t),header:{"Content-Type":"application/json"},data:e})},S=function(t){return a()({method:"post",url:"".concat(c,"/admin/themes"),header:{"Content-Type":"application/json"},data:t})},y=function(t){return a()({method:"delete",url:"".concat(c,"/admin/themes/").concat(t.id),header:{"Content-Type":"application/json"},data:t})},O=function(t){return a()({method:"post",url:"".concat(c,"/admin/userslist"),header:{"Content-Type":"application/json"},data:t})},P=function(t){return a()({method:"post",url:"".concat(c,"/admin/setting"),header:{"Content-Type":"application/json"},data:t})},L=function(t){return a()({method:"patch",url:"".concat(c,"/admin/setting/").concat(t.settingId),header:{"Content-Type":"application/json"},data:t})},I=function(t){return a()({method:"post",url:"".concat(c,"/admin/supplierlist"),header:{"Content-Type":"application/json"},data:t})}},"2b8f":function(t,e,n){},"2c02":function(t,e,n){},"2dd0":function(t,e,n){t.exports=n.p+"img/spot-marker.323ea644.svg"},"31f8":function(t,e,n){t.exports=n.p+"img/menu.fc907292.svg"},"3b0c":function(t,e,n){},"478d":function(t,e,n){t.exports=n.p+"img/hotel-marker.d31c52d1.svg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("d3b7"),n("caad"),n("2532"),n("b0c0"),n("ac1f"),n("1276"),n("2ca0"),n("498a");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Navbar"),n("div",{staticClass:"container-fluid"},[n("router-view",{key:t.$route.fullPath})],1),n("Footer")],1)},c=[],r=n("1da1"),i=(n("96cf"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nav",[o("div",{staticClass:"nav"},[o("button",{staticClass:"nav-mobile-menu",on:{click:t.expandingMenu}},[o("img",{attrs:{src:n("31f8"),alt:"手機版選單"}})]),o("button",{staticClass:"nav-brand",on:{click:t.collapseMenu}},[o("router-link",{staticClass:"nav-brand-item",attrs:{to:{name:"home"}}},[o("img",{attrs:{src:n("e347"),alt:"首頁Logo"}})]),o("SearchBar",{attrs:{className:"nav-search-bar"}})],1),o("button",{staticClass:"nav-mobile-search",on:{click:t.expandingSearch}},[o("img",{attrs:{src:n("9748"),alt:"手機版搜尋"}})]),o("ul",{staticClass:"nav-list"},[o("li",{on:{click:function(e){t.menuShow=!1}}},[o("router-link",{staticClass:"nav-list-item",class:{active:"scenicspots"===t.$route.params.name},attrs:{to:{name:"scenicspots"}}},[t._v("找景點"),o("img",{attrs:{src:n("617a"),alt:"景點icon"}})])],1),o("li",{on:{click:function(e){t.menuShow=!1}}},[o("router-link",{staticClass:"nav-list-item",class:{active:"hotels"===t.$route.params.name},attrs:{to:{name:"hotels"}}},[t._v("找飯店"),o("img",{attrs:{src:n("b612"),alt:"飯店icon"}})])],1),o("li",{on:{click:function(e){t.menuShow=!1}}},[o("router-link",{staticClass:"nav-list-item",class:{active:"restaurants"===t.$route.params.name},attrs:{to:{name:"restaurants"}}},[t._v("找餐廳"),o("img",{attrs:{src:n("6119"),alt:"住宿icon"}})])],1),o("li",{on:{click:function(e){t.menuShow=!1}}},[o("router-link",{staticClass:"nav-list-item-f",attrs:{to:{name:"favorites"}}},[t._v("我的旅程")])],1)])]),o("div",{staticClass:"nav-mobile-search-block",class:{expanding:t.searchShow}},[o("SearchBar",{attrs:{className:"nav-mobile-search-bar"}})],1),o("div",{staticClass:"nav-mobile",class:{expanding:t.menuShow}},[o("ul",{staticClass:"nav-mobile-list"},[o("li",{on:{click:function(e){t.menuShow=!1}}},[o("router-link",{staticClass:"nav-mobile-list-item",class:{active:"scenicspots"===t.$route.params.name},attrs:{to:{name:"scenicspots"}}},[t._v("找景點"),o("img",{attrs:{src:n("617a"),alt:"景點icon"}})])],1),o("li",{on:{click:function(e){t.menuShow=!1}}},[o("router-link",{staticClass:"nav-mobile-list-item",class:{active:"hotels"===t.$route.params.name},attrs:{to:{name:"hotels"}}},[t._v("找飯店"),o("img",{attrs:{src:n("b612"),alt:"飯店icon"}})])],1),o("li",{on:{click:function(e){t.menuShow=!1}}},[o("router-link",{staticClass:"nav-mobile-list-item",class:{active:"restaurants"===t.$route.params.name},attrs:{to:{name:"restaurants"}}},[t._v("找餐廳"),o("img",{attrs:{src:n("6119"),alt:"住宿icon"}})])],1)]),o("ul",{staticClass:"nav-mobile-list"},[o("li",{on:{click:function(e){t.menuShow=!1}}},[o("router-link",{staticClass:"nav-mobile-list-item-f",attrs:{to:{name:"favorites"}}},[t._v("我的旅程")])],1)])])])}),s=[],u=n("e287"),d={data:function(){return{menuShow:!1,searchShow:!1}},methods:{expandingMenu:function(){!1===this.menuShow?(this.menuShow=!0,this.searchShow=!1):this.menuShow=!1},expandingSearch:function(){!1===this.searchShow?(this.searchShow=!0,this.menuShow=!1):this.searchShow=!1},collapseMenu:function(){this.searchShow=!1,this.menuShow=!1}},created:function(){this.window.addEventListener("scroll",this.collapseMenu)},destroyed:function(){this.window.removeEventListener("scroll",this.collapseMenu)},components:{SearchBar:u["a"]}},l=d,f=(n("c2cd"),n("2877")),h=Object(f["a"])(l,i,s,!1,null,"4de61768",null),m=h.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"footer-container"},[n("div",{staticClass:"footer"},[t._m(0),n("div",{staticClass:"footer-link"},[n("div",{staticClass:"footer-link-item"},[n("router-link",{attrs:{to:{name:"scenicspots"}}},[t._v("找景點")]),n("router-link",{attrs:{to:{name:"themes",params:{type:"scenicspots"}}}},[t._v("主題景點")])],1),n("div",{staticClass:"footer-link-item"},[n("router-link",{attrs:{to:{name:"restaurants"}}},[t._v("找餐廳")]),n("router-link",{attrs:{to:{name:"themes",params:{type:"restaurants"}}}},[t._v("主題餐廳")])],1),n("div",{staticClass:"footer-link-item"},[n("router-link",{attrs:{to:{name:"hotels"}}},[t._v("找飯店")]),n("router-link",{attrs:{to:{name:"themes",params:{type:"hotels"}}}},[t._v("嚴選住宿")])],1),n("div",{staticClass:"footer-link-item"},[t.userIsLogin?n("button",{on:{click:t.logout}},[t._v("會員登出")]):n("router-link",{attrs:{to:{name:"user-login"}}},[t._v("會員登入")]),n("router-link",{attrs:{to:{name:"suppliers"}}},[t._v("商家專區")])],1)]),n("div",{staticClass:"footer-copyright"},[t._v("Released 2021 by Shiaohan & 阿柳 ©")])])])},v=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"footer-brand"},[o("img",{attrs:{src:n("ee3c"),alt:"logo-icon"}}),o("div",{staticClass:"footer-brand-icon"},[o("img",{attrs:{src:n("cd06"),alt:"facebook-icon"}}),o("img",{attrs:{src:n("d4ab"),alt:"line-icon"}}),o("img",{attrs:{src:n("662b"),alt:"twitter-icon"}})])])}],T=n("5530"),g=n("2f62"),A={computed:Object(T["a"])({},Object(g["b"])("serverModule",["userIsLogin"])),methods:{logout:function(){this.$store.dispatch("serverModule/signOutUserOnServer",this),this.$store.dispatch("otherModule/getFavorites")}}},_=A,D=(n("869d"),Object(f["a"])(_,p,v,!1,null,"69bb6e1c",null)),b=D.exports,k={name:"App",components:{Navbar:m,Footer:b},methods:{checkUserIsLogin:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$cookies.get("_u"),!n){e.next=6;break}return e.next=4,t.$store.dispatch("serverModule/checkUserStatus",t);case 4:e.next=8;break;case 6:return e.next=8,t.$store.dispatch("otherModule/getFavorites");case 8:case"end":return e.stop()}}),e)})))()}},created:function(){this.$store.dispatch("serverModule/getHotsByServer"),this.$store.dispatch("serverModule/getThemesByServer"),this.checkUserIsLogin()}},E=k,S=(n("1258"),Object(f["a"])(E,a,c,!1,null,"46ab372a",null)),y=S.exports,O=n("16ee"),P=n("8c4f"),L=(n("3ca3"),n("ddb0"),[{path:"/",component:function(){return Promise.all([n.e("chunk-cc1715d8"),n.e("chunk-53d3590d")]).then(n.bind(null,"eea6"))},name:"home",beforeEnter:function(t,e,n){if(null!==sessionStorage.getItem("redirect")){var o=sessionStorage.redirect;delete sessionStorage.redirect,n(o)}else n()}},{path:"/search",component:function(){return Promise.all([n.e("chunk-cc1715d8"),n.e("chunk-d681fd62")]).then(n.bind(null,"dba4"))},name:"search"},{path:"/themes/:type",component:function(){return Promise.all([n.e("chunk-cc1715d8"),n.e("chunk-0d793f91")]).then(n.bind(null,"baf8"))},name:"themes"},{path:"/theme/:index",component:function(){return Promise.all([n.e("chunk-cc1715d8"),n.e("chunk-25e1cb46")]).then(n.bind(null,"35d2"))},name:"theme"},{path:"/scenicspots",component:function(){return Promise.all([n.e("chunk-cc1715d8"),n.e("chunk-602d4d1e"),n.e("chunk-2d225015")]).then(n.bind(null,"e30a"))},name:"scenicspots"},{path:"/activities",component:function(){return Promise.all([n.e("chunk-cc1715d8"),n.e("chunk-602d4d1e"),n.e("chunk-2d0ba31c")]).then(n.bind(null,"35bf"))},name:"activities"},{path:"/restaurants",component:function(){return Promise.all([n.e("chunk-cc1715d8"),n.e("chunk-602d4d1e"),n.e("chunk-2d0c4832")]).then(n.bind(null,"3ac1"))},name:"restaurants"},{path:"/hotels",component:function(){return Promise.all([n.e("chunk-cc1715d8"),n.e("chunk-602d4d1e"),n.e("chunk-2d2255d9")]).then(n.bind(null,"e3a6"))},name:"hotels"},{path:"/:type/:id",component:function(){return Promise.all([n.e("chunk-cc1715d8"),n.e("chunk-3b8eb828")]).then(n.bind(null,"afa2"))},name:"detail"},{path:"/favorites",component:function(){return Promise.all([n.e("chunk-cc1715d8"),n.e("chunk-d09e6ff4")]).then(n.bind(null,"58a0"))},name:"favorites"},{path:"/user-login",component:function(){return n.e("chunk-791859f9").then(n.bind(null,"ba8b"))},name:"user-login"},{path:"/user-password-forget",component:function(){return n.e("chunk-5c9e3b18").then(n.bind(null,"f65d"))},name:"user-password-forget"},{path:"/user-password-reset",component:function(){return n.e("chunk-13cea410").then(n.bind(null,"3242"))},name:"user-password-reset"},{path:"/suppliers",component:function(){return n.e("chunk-40f71f90").then(n.bind(null,"947b"))},name:"suppliers",meta:{requiresAuth:!0}},{path:"/supplier-login",component:function(){return n.e("chunk-b70701f4").then(n.bind(null,"1d74"))},name:"supplier-login"},{path:"/admin",component:function(){return n.e("chunk-5605ba13").then(n.bind(null,"4208"))},name:"admin",meta:{requiresAuth:!0},children:[{path:"themes",component:function(){return n.e("chunk-98d7d4d2").then(n.bind(null,"1c35"))},name:"admin-themes"},{path:"users",component:function(){return n.e("chunk-0869ec0d").then(n.bind(null,"5498"))},name:"admin-users"},{path:"suppliers",component:function(){return n.e("chunk-2322d342").then(n.bind(null,"d8a8"))},name:"admin-suppliers"},{path:"setting",component:function(){return n.e("chunk-6dd00220").then(n.bind(null,"d301"))},name:"admin-setting"}]},{path:"/admin-login",component:function(){return n.e("chunk-6fd9a691").then(n.bind(null,"e663"))},name:"admin-login"},{path:"*",component:function(){return n.e("chunk-646064e5").then(n.bind(null,"05c2"))},name:"notfound"}]),I=(n("99af"),n("a434"),n("d81d"),n("bc3a")),w=n.n(I),U=n("6c2d"),C=n("76ce"),j="https://ptx.transportdata.tw/MOTC/v2/Tourism/",N="d19af577338d42efacc7449cde03af73",x="mqu44wr2pLMKOlphJRc0JAsFIOQ",R=function(){var t=(new Date).toGMTString(),e=new U["a"]("SHA-1","TEXT");e.setHMACKey(x,"TEXT"),e.update("x-date: "+t);var n=e.getHMAC("B64"),o='hmac username="'+N+'", algorithm="hmac-sha1", headers="x-date", signature="'+n+'"';return{Authorization:o,"X-Date":t}},G=function(t){var e=t.latitude,n=t.longitude,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return e&&n?"&$spatialFilter=nearby(".concat(e,",").concat(n,", ").concat(o,")"):""},M=function(t,e){if(0!==e.length){var n=e.reduce((function(t,e,n){return t+(0===n?"".concat(e):",".concat(e))}),"&$select=");return n+=",".concat(t,"ID,").concat(t,"Name"),n+="ScenicSpot"===t?",Class1,Class2,Class3":"Activity"==t?",Class1, Class2":",Class",n}return""},$=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.top,o=void 0===n?30:n,a=e.select,c=void 0===a?[]:a,r=e.position,i=void 0===r?null:r,s=e.skips,u=void 0===s?{scenicspots:0,restaurants:0,hotels:0,activities:0}:s,d=e.dataType,l=void 0===d?"all":d,f=e.id,h=void 0===f?"":f,m=e.keyword,p=void 0===m?"":m,v=e.townName,T=void 0===v?"":v,g=e.ids,A=void 0===g?[]:g,_=e.tags,D=void 0===_?[]:_,b=e.classType,k=void 0===b?"":b,E="";if(o&&(E+="&$top=".concat(o)),"undefined"!==typeof u&&u[l]&&(E+="&$skip=".concat(u[l])),c&&(E+=M(t,c)),i&&(E+=G(i)),h&&(E+="&$filter=".concat(t,"ID eq '").concat(h,"'")),(p||T||A.length>0||D.length>0||k)&&(E+="&$filter="),T&&(E.indexOf("$filter=(contains")>0?E+="and (contains(Address, '".concat(T,"'))"):E+="(contains(Address, '".concat(T,"'))")),p&&(E.indexOf("$filter=(contains")>0?E+="and (contains(".concat(t,"Name, '").concat(p,"') or contains(Description, '").concat(p,"'))"):E+="(contains(".concat(t,"Name, '").concat(p,"') or contains(Description, '").concat(p,"'))")),D&&0!==D.length){var S="";E.indexOf("$filter=(contains")>0?S+="and (":S+="(",S+=D.reduce((function(e,n,o){return 0!==o&&(e+=" or "),e+="contains(".concat(t,"Name, '").concat(n,"') or contains(Description, '").concat(n,"')"),e}),""),S+=")",E+=S}if(A&&0!==A.length){var y="";E.indexOf("$filter=(contains")>0?y+="and (":y+="(",y+=A.reduce((function(e,n,o){return 0!==o&&(e+=" or "),e+="contains(".concat(t,"ID, '").concat(n,"')"),e}),""),y+=")",E+=y}if(k){var O="";E.indexOf("$filter=(contains")>0?O+="and (":O+="(",O+="scenicspots"===l?"contains(Class1, '".concat(k,"')")+" or contains(Class2, '".concat(k,"')")+" or contains(Class3, '".concat(k,"')"):"contains(Class, '".concat(k,"')"),O+=")",E+=O}return encodeURI("".concat(j).concat(t,"?$format=JSON").concat(E))},F=function(t){var e="ScenicSpot";return w()({method:"get",url:$(e,t),headers:R()})},H=function(t){var e="Restaurant";return w()({method:"get",url:$(e,t),headers:R()})},B=function(t){var e="Hotel";return w()({method:"get",url:$(e,t),headers:R()})},J=function(t){var e="Activity";return w()({method:"get",url:$(e,t),headers:R()})},V=function(t){var e=t.id,n=Object(C["f"])(e);return w()({method:"get",url:$(n,{id:e}),headers:R()})},K=function(t){var e=Object(C["f"])(t);return w()({method:"get",url:$(e,{id:t,select:["Picture"]}),headers:R()})},q=function(t){var e,n=[F,H,B,J];switch(t){case"scenicspots":e=n[0];break;case"restaurants":e=n[1];break;case"hotels":e=n[2];break;case"activities":e=n[3];break;default:e=!1;break}return e},z=function(t){var e=t.dataType;if("all"===e)return Promise.all([F(t),H(t),B(t),J(t)]);var n=q(e);if(!n)throw"dataType: ".concat(e,", 不是列舉的值!");return n(t)},Y=function(t,e,n){z(t).then((function(n){var o=[];n instanceof Array?("undefined"!==typeof t.skips&&(t.skips["scenicspots"]+=n[0].data.length,t.skips["restaurants"]+=n[1].data.length,t.skips["hotels"]+=n[2].data.length,t.skips["activities"]+=n[3].data.length),o=Object(C["b"])(n)):("undefined"!==typeof t.skips&&(t.skips[t.dataType]+=n.data.length),o=n.data.map((function(t){return Object(C["c"])(t)})));var a=o.map((function(t){return t["".concat(Object(C["e"])(t),"ID")]}));Object(O["k"])({ids:a}).then((function(n){var c=Object(C["a"])(o,n.data.average_scores);e(c,t,a)}))})).catch((function(t){n(t)}))},W=(n("e9c4"),{namespaced:!0,state:{userIsLogin:!1,users:[],settings:[],suppliers:[]},getters:{userIsLogin:function(t){return t.userIsLogin},users:function(t){return t.users},settings:function(t){return t.settings},suppliers:function(t){return t.suppliers}},mutations:{UPDATE_USER_LOGIN:function(t,e){return t.userIsLogin=e},UPDATE_USERS:function(t,e){return t.users=e},UPDATE_SETTINGS:function(t,e){return t.settings=e},UPDATE_SUPPLIERS:function(t,e){return t.suppliers=e}},actions:{getThemesByServer:function(t){var e=t.commit;Object(O["n"])().then((function(t){var n=t.data.themes.reduce((function(t,e){return t[e.id]={themeId:e.id,themeName:e.theme_name,themeTags:e.theme_tags,themeDataList:[]},t}),{});e("UPDATE_THEMES",n,{root:!0})})).catch((function(t){console.log("getThemesByServer: ".concat(t))}))},getHotsByServer:function(t){var e=t.commit;Object(O["j"])().then((function(t){e("UPDATE_HOTS",t.data.ids,{root:!0})})).catch((function(t){console.log("getHotsByServer: ".concat(t))}))},postSearchCountToSever:function(t,e){var n=JSON.stringify(e);Object(O["s"])(n,"addSearch").catch((function(t){console.log("postSearchCountToSever: ".concat(t))}))},postEnterCountToSever:function(t,e){var n=JSON.stringify([e]);Object(O["s"])(n,"addEnter").catch((function(t){console.log("postEnterCountToSever: ".concat(t))}))},postFavoriteCountToSever:function(t,e){var n=e.dataId,o=e.add,a=JSON.stringify([n]),c=o?"add":"remove";Object(O["s"])(a,"".concat(c,"Favorite")).catch((function(t){console.log("postFavoriteCountToSever: ".concat(t))}))},postCommentToServer:function(t,e){var n=t.commit,o=t.rootState,a=e.commentForm,c=e.id,r=e.vm,i=r.$cookies.get("_u"),s=Object(T["a"])({auth_token:i},a);Object(O["r"])(s,c).then((function(t){var e=t.data,a=e.message,c=e.comments,r=e.average_score,i=Object(C["d"])(o.dataDetail);i.Comment=c,i.CommentScore=r,n("UPDATE_DATA_DETAIL",i,{root:!0}),window.alert(a)})).catch((function(t){console.log("postCommentToServer: ".concat(t)),window.alert("新增評論失敗")}))},loginUserOnServer:function(t,e){var n=t.commit,o=e.userParams,a=e.vm;Object(O["w"])(o).then((function(t){var e=t.data,o=e.message,c=e.auth_token,r=e.favorites;a.$cookies.set("_u",c,"1d",null,null,!0),n("UPDATE_USER_LOGIN",!0),n("SET_FAVORITES",r,{root:!0}),window.alert(o),a.$router.push({name:"favorites"})})).catch((function(t){console.log("loginUserOnServer: ".concat(t)),window.alert("登入失敗")}))},signUpUserOnServer:function(t,e){var n=t.commit,o=t.rootState,a=e.userParams,c=e.vm,r=JSON.stringify(o.favorites);Object(O["y"])(a).then((function(t){if(200===t.data.status){var e=t.data.auth_token;c.$cookies.set("_u",e,"1d",null,null,!0),n("UPDATE_USER_LOGIN",!0);var o={auth_token:e,favorites:r};Object(O["d"])(o).then((function(t){200===t.data.status?(window.alert("申請成功"),c.$router.push({name:"favorites"})):window.alert(t.data.message)}))}else window.alert(t.data.message)})).catch((function(t){console.log("signUpUserOnServer: ".concat(t)),c.$router.push("/"),window.alert("發生不明錯誤")}))},signOutUserOnServer:function(t,e){var n=t.commit,o=e.$cookies.get("_u");Object(O["x"])({auth_token:o}).then((function(){n("UPDATE_USER_LOGIN",!1),e.delete_cookie("_u","/",e.domain),e.$router.push({name:"home"})})).catch((function(t){n("UPDATE_USER_LOGIN",!1),e.delete_cookie("_u","/",e.domain),e.$router.push({name:"home"}),console.log("signOutUserOnServer: ".concat(t))}))},checkUserStatus:function(t,e){var n=t.commit,o=e.$cookies.get("_u");Object(O["v"])({auth_token:o}).then((function(t){var o=t.data,a=o.auth_token,c=o.favorites;e.$cookies.remove("_u"),e.$cookies.set("_u",a,"1d",null,null,!0),n("SET_FAVORITES",c,{root:!0}),n("UPDATE_USER_LOGIN",!0)})).catch((function(t){e.delete_cookie("_u","/",e.domain),console.log("checkUserStatus: ".concat(t))}))},getFavoritesByUser:function(t,e){var n=t.commit,o=e.$cookies.get("_u");Object(O["i"])({auth_token:o}).then((function(t){t.data.favorites&&n("SET_FAVORITES",t.data.favorites,{root:!0})})).catch((function(t){console.log("getFavoritesByUser: ".concat(t))}))},changeFavoriteToData:function(t,e){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var a,c,r,i,s,u,d,l;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a=t.commit,c=t.rootState,r=e.dataId,i=e.add,s=e.vm,u=s.$cookies.get("_u"),a("UPDATE_FAVORITE_ADDING",!0,{root:!0}),o.next=6,a(i?"ADD_FAVORITES":"REMOVE_FAVORITES",r,{root:!0});case 6:d=JSON.stringify(c.favorites),l={auth_token:u,favorites:d},Object(O["d"])(l).catch((function(t){console.log("changeFavoriteToData: ".concat(t))})),a("UPDATE_FAVORITE_ADDING",!1,{root:!0}),n.dispatch("serverModule/postFavoriteCountToSever",{dataId:r,add:i});case 11:case"end":return o.stop()}}),o)})))()},loginSupplierOnServer:function(t,e){var n=e.supplierParams,o=e.vm;Object(O["t"])(n).then((function(t){var e=t.data.auth_token;o.$cookies.set("_s",e,"1d",null,null,!0),window.alert("登入成功"),o.$router.push({name:"suppliers"})})).catch((function(t){console.log("loginSupplierOnServer: ".concat(t)),window.alert("廠商登入失敗")}))},signOutSupplierOnServer:function(t,e){var n=e.$cookies.get("_s");Object(O["u"])({auth_token:n}).then((function(){e.delete_cookie("_s","/",e.domain),e.$router.push({name:"home"})})).catch((function(t){e.delete_cookie("_s","/",e.domain),e.$router.push({name:"home"}),console.log("signOutSupplierOnServer: ".concat(t))}))},loginAdminOnServer:function(t,e){var n=e.adminParams,o=e.vm;Object(O["b"])(n).then((function(t){var e=t.data.auth_token;o.$cookies.set("_a",e,"1d",null,null,!0),window.alert("登入成功"),o.$router.push({name:"admin"})})).catch((function(t){console.log("loginAdminOnServer: ".concat(t)),window.alert("管理員登入失敗")}))},signOutAdminOnServer:function(t,e){var n=e.$cookies.get("_a");Object(O["c"])({auth_token:n}).then((function(){e.delete_cookie("_a","/",e.domain),e.$router.push({name:"home"})})).catch((function(t){e.delete_cookie("_a","/",e.domain),e.$router.push({name:"home"}),console.log("signOutUserOnServer: ".concat(t))}))},updateThemeToServer:function(t,e){var n=t.commit,o=e.themeId,a=e.themeParams,c=e.vm,r=c.$cookies.get("_a");a.auth_token=r,Object(O["q"])(o,a).then((function(t){var e=t.data.themes.reduce((function(t,e){return t[e.id]={themeId:e.id,themeName:e.theme_name,themeTags:e.theme_tags,themeDataList:[]},t}),{});n("UPDATE_THEMES",e,{root:!0}),window.alert("主題修改成功")})).catch((function(t){console.log("updateThemeToServer: ".concat(t)),window.alert("主題修改失敗")}))},addThemeToServer:function(t,e){var n=t.commit,o=e.themeParams,a=e.vm,c=a.$cookies.get("_a");o.auth_token=c,Object(O["a"])(o).then((function(t){var e=t.data.themes.reduce((function(t,e){return t[e.id]={themeId:e.id,themeName:e.theme_name,themeTags:e.theme_tags,themeDataList:[]},t}),{});n("UPDATE_THEMES",e,{root:!0}),window.alert("主題新增成功")})).catch((function(t){console.log("addThemeToServer: ".concat(t)),window.alert("主題新增失敗")}))},deleteThemeToServer:function(t,e){var n=t.commit,o=e.themeId,a=e.vm,c=a.$cookies.get("_a"),r={auth_token:c,id:o};Object(O["g"])(r).then((function(t){var e=t.data.themes.reduce((function(t,e){return t[e.id]={themeId:e.id,themeName:e.theme_name,themeTags:e.theme_tags,themeDataList:[]},t}),{});n("UPDATE_THEMES",e,{root:!0}),window.alert("主題刪除成功")})).catch((function(t){console.log("deleteThemeToServer: ".concat(t)),window.alert("主題刪除失敗")}))},getUsersByServer:function(t,e){var n=t.commit,o=e.vm,a=o.$cookies.get("_a");Object(O["o"])({auth_token:a}).then((function(t){n("UPDATE_USERS",t.data.users)})).catch((function(t){console.log("getUsersByServer: ".concat(t))}))},getSettingByServer:function(t,e){var n=t.commit,o=e.vm,a=o.$cookies.get("_a");Object(O["l"])({auth_token:a}).then((function(t){200===t.data.status?n("UPDATE_SETTINGS",t.data.settings):window.alert(t.data.message)})).catch((function(t){console.log("getSettingByServer: ".concat(t)),window.alert("發生不明錯誤")}))},updateSettingToServer:function(t,e){var n=t.commit,o=e.settingParams,a=e.vm,c=a.$cookies.get("_a");o.auth_token=c,Object(O["p"])(o).then((function(t){200===t.data.status&&n("UPDATE_SETTINGS",t.data),window.alert(t.data.message)})).catch((function(t){console.log("updateSettingToServer: ".concat(t)),window.alert("發生不明錯誤")}))},getSupplier:function(t,e){var n=t.commit,o=e.vm,a=o.$cookies.get("_a"),c={auth_token:a};Object(O["m"])(c).then((function(t){n("UPDATE_SUPPLIERS",t.data.suppliers)})).catch((function(t){console.log("getSupplier: ".concat(t)),window.alert("發生不明錯誤")}))}}}),Q=(n("159b"),n("e11e")),X=n.n(Q),Z=n("95e3"),tt={namespaced:!0,state:{mapMode:!1,mapClass:{}},getters:{adding:function(t){return t.adding},mapMode:function(t){return t.mapMode}},mutations:{REMOVE_SHOW_PICTURE:function(t){return t.showPicture=""},UPDATE_SHOW_PICTURE:function(t,e){return t.showPicture=e},TOGGLE_MAP_MODE:function(t,e){return t.mapMode=e},SET_MAP_MODE_OBJECT:function(t,e){return t.mapClass=e}},actions:{getFavorites:function(t){var e=t.commit,n=JSON.parse(localStorage.getItem("touristHeart"));n&&e("SET_FAVORITES",n,{root:!0})},changeFavoriteToData:function(t,e){var n=t.commit,o=t.rootState,a=e.dataId,c=e.add;n("UPDATE_FAVORITE_ADDING",!0,{root:!0}),n(c?"ADD_FAVORITES":"REMOVE_FAVORITES",a,{root:!0}),this.dispatch("serverModule/postFavoriteCountToSever",{dataId:a,add:c}),localStorage.setItem("touristHeart",JSON.stringify(o.favorites)),n("UPDATE_FAVORITE_ADDING",!1,{root:!0})},setMarkerOnMap:function(t){var e=t.state,n=t.rootState,o=n.ptxData.dataList;if(0!==o.length){var a=e.mapClass,c=(new X.a.LayerGroup).addTo(a);o.forEach((function(t){var e=t.Position,n=e.PositionLat,o=e.PositionLon;X.a.marker([n,o],{icon:Object(Z["b"])(t.ID)}).bindPopup(Object(Z["a"])(t),{minWidth:200,offset:[0,-30],className:"map-card ".concat(t.Type)}).addTo(c)})),a.tap&&a.tap.disable();var r=o[0].Position.PositionLat,i=o[0].Position.PositionLon;a.flyTo([r,i],16,{animate:!0,duration:1.5})}}}},et={state:{dataList:[],allTypeDataList:[],dataDetail:{},ptxData:{dataList:[],query:{dataType:"all",top:30,select:[],position:{latitude:"",longitude:""},skips:{scenicspots:0,restaurants:0,hotels:0,activities:0},keyword:"",townName:"",ids:[],tags:[],classType:""}},keyword:"",currentCity:"臺北市",currentTown:"",currentClassType:"",dataLoaing:!1,moreDataLoading:!1,favoriteAdding:!1,favorites:[],favoriteDataList:[],hots:[],hotDataList:[],themes:{1:{themeId:"1",themeName:"Rainbow Life!",themeTags:["彩虹","七彩"],themeDataList:[]},2:{themeId:"2",themeName:"賞楓秘境",themeTags:["楓","紅葉"],themeDataList:[]}}},getters:{ptxData:function(t){return t.ptxData},dataList:function(t){return t.dataList},allTypeDataList:function(t){return t.allTypeDataList},dataDetail:function(t){return t.dataDetail},hotDataList:function(t){return t.hotDataList},favoriteDataList:function(t){return t.favoriteDataList},favorites:function(t){return t.favorites},hots:function(t){return t.hots},themes:function(t){return t.themes},keyword:function(t){return t.keyword},currentCity:function(t){return t.currentCity},currentTown:function(t){return t.currentTown},currentClassType:function(t){return t.currentClassType},dataLoaing:function(t){return t.dataLoaing},moreDataLoading:function(t){return t.moreDataLoading},favoriteAdding:function(t){return t.favoriteAdding}},mutations:{UPDATE_DATA_LIST:function(t,e){return t.ptxData.dataList=e},UPDATE_MORE_DATA_LIST:function(t,e){return t.ptxData.dataList=t.ptxData.dataList.concat(e)},UPDATE_ALL_TYPE_DATA_LIST:function(t,e){return t.allTypeDataList=e},UPDATE_HOT_DATA_LIST:function(t,e){return t.hotDataList=e},UPDATE_FAVORITE_DATA_LIST:function(t,e){return t.favoriteDataList=e},UPDATE_THEME_DATA_LIST:function(t,e){var n=e.index,o=e.dataList;return t.themes[n].themeDataList=o},UPDATE_DATA_DETAIL:function(t,e){return t.dataDetail=e},CLEAR_DATA_DETAIL:function(t){return t.dataDetail={}},UPDATE_DATA_QUERY:function(t,e){return t.ptxData.query=Object(T["a"])(Object(T["a"])({},t.ptxData.query),e)},UPDATE_KEYWORD:function(t,e){return t.keyword=e},TOGGLE_CITY:function(t,e){return t.currentCity=e},TOGGLE_TOWN:function(t,e){return t.currentTown=e},TOGGLE_CLASS_TYPE:function(t,e){return t.currentClassType=e},INIT_DATA_QUERY:function(t){return t.ptxData.query={dataType:"all",top:30,select:[],position:{latitude:"",longitude:""},skips:{scenicspots:0,restaurants:0,hotels:0,activities:0},keyword:"",townName:"",ids:[],tags:[],classType:""}},UPDATE_DATA_LOADING:function(t,e){return t.dataLoaing=e},UPDATE_MORE_DATA_LOADING:function(t,e){return t.moreDataLoading=e},UPDATE_FAVORITE_ADDING:function(t,e){return t.favoriteAdding=e},SET_FAVORITES:function(t,e){return t.favorites=e},ADD_FAVORITES:function(t,e){return t.favorites.push(e)},REMOVE_FAVORITES:function(t,e){return t.favorites.splice(t.favorites.indexOf(e),1)},UPDATE_THEMES:function(t,e){return t.themes=e},UPDATE_HOTS:function(t,e){return t.hots=e}},actions:{getSingleTypeDataList:function(t,e){var n=t.commit,o=t.state;n("UPDATE_DATA_LOADING",!0);var a=Object(C["d"])(o.ptxData.query);a.dataType=e,Y(a,(function(t,e){a=e,n("UPDATE_DATA_LIST",t),n("UPDATE_DATA_QUERY",a),n("UPDATE_DATA_LOADING",!1)}),(function(t){n("UPDATE_DATA_LOADING",!1),console.log("getSingleTypeDataList: ".concat(t))}))},getAllTypeDataListWithPosition:function(t,e){var n=t.commit,o=t.state;n("UPDATE_DATA_LOADING",!0);var a=Object(C["d"])(o.ptxData.query);a.position={latitude:e.PositionLon,longitude:e.PositionLat},a.top=6,Y(a,(function(t){n("UPDATE_ALL_TYPE_DATA_LIST",t)}),(function(t){n("UPDATE_DATA_LOADING",!1),console.log("getAllTypeDataListWithPosition: ".concat(t))}))},getAllTypeDataListWithKeyword:function(t,e){var n=this,o=t.commit,a=t.state;o("UPDATE_DATA_LOADING",!0);var c=Object(C["d"])(a.ptxData.query);c.keyword=e,c.top=6,Y(c,(function(t,e,a){c=e,o("UPDATE_DATA_LIST",t),o("UPDATE_KEYWORD",""),o("UPDATE_DATA_QUERY",c),o("UPDATE_DATA_LOADING",!1),n.dispatch("serverModule/postSearchCountToSever",a)}),(function(t){o("UPDATE_DATA_LOADING",!1),console.log("getAllTypeDataListWithKeyword: ".concat(t))}))},filterDataListWithTown:function(t,e){var n=t.commit,o=t.state,a=e.townName;n("UPDATE_DATA_LOADING",!0);var c=Object(C["d"])(o.ptxData.query);c.townName=a,c.skips={scenicspots:0,restaurants:0,hotels:0,activities:0},Y(c,(function(t,e){c=e,n("TOGGLE_TOWN",a),n("UPDATE_DATA_LIST",t),n("UPDATE_DATA_QUERY",c),n("UPDATE_DATA_LOADING",!1)}),(function(t){n("UPDATE_DATA_LOADING",!1),console.log("filterDataListWithTown: ".concat(t))}))},filterDataListByClass:function(t,e){var n=t.commit,o=t.state,a=e.classType;n("UPDATE_DATA_LOADING",!0);var c=Object(C["d"])(o.ptxData.query);c.classType=a,c.skips={scenicspots:0,restaurants:0,hotels:0,activities:0},Y(c,(function(t,e){c=e,n("TOGGLE_CLASS_TYPE",a),n("UPDATE_DATA_LIST",t),n("UPDATE_DATA_QUERY",c),n("UPDATE_DATA_LOADING",!1)}),(function(t){n("UPDATE_DATA_LOADING",!1),console.log("filterDataListByClass: ".concat(t))}))},getMoreDataList:function(t){var e=t.commit,n=t.state;e("UPDATE_MORE_DATA_LOADING",!0);var o=n.ptxData,a=Object(C["d"])(o.query);Y(a,(function(t,n){a=n,e("UPDATE_MORE_DATA_LIST",t),e("UPDATE_DATA_QUERY",a),e("UPDATE_MORE_DATA_LOADING",!1)}),(function(t){e("UPDATE_MORE_DATA_LOADING",!1),console.log("getMoreDataList: ".concat(t))}))},getSingleTypeDetail:function(t,e){var n=this,o=t.commit;Promise.all([V({id:e}),Object(O["h"])(e)]).then((function(t){n.dispatch("serverModule/postEnterCountToSever",e);var o=t[0].data[0];return o.Comment=t[1].data.comments,o.CommentScore=t[1].data.average_score,Object(C["c"])(o)})).then((function(t){var e={dataType:"all",position:{latitude:t.Position.PositionLat,longitude:t.Position.PositionLon}};Y(e,(function(e){t.NearbyDataList=e,o("UPDATE_DATA_DETAIL",t)}),(function(t){o("UPDATE_DATA_LOADING",!1),console.log("getSingleTypeDetail: ".concat(t))}))})).catch((function(t){o("UPDATE_DATA_LOADING",!1),console.log("getSingleTypeDetail: ".concat(t))}))},getHotDataList:function(t,e){var n=t.commit,o=t.state,a=e.count,c=e.callbackFn,r=o.hots,i=[];if(0!==r.length){for(var s=0;s<=(a||7);s++)i.push(K(r[s]));Promise.all(i).then((function(t){var e=Object(C["b"])(t),o=e.map((function(t){return t["".concat(Object(C["e"])(t),"ID")]}));Object(O["k"])({ids:o}).then((function(t){var o=Object(C["a"])(e,t.data.average_scores);n("UPDATE_HOT_DATA_LIST",o),c&&c()}))})).catch((function(t){c&&c(),console.log("getHotDataList: ".concat(t))}))}},getFavoriteDataList:function(t){var e=t.commit,n=t.state;e("UPDATE_DATA_LOADING",!0);var o=n.favorites,a={dataType:"all",ids:o,select:["Picture","Position"]};if(0===o.length)return e("UPDATE_FAVORITE_DATA_LIST",[]),void e("UPDATE_DATA_LOADING",!1);Y(a,(function(t){e("UPDATE_FAVORITE_DATA_LIST",t),e("UPDATE_DATA_LOADING",!1)}),(function(t){e("UPDATE_DATA_LOADING",!1),console.log("getFavoriteDataList: ".concat(t))}))},getThemeDataList:function(t,e){var n=t.commit,o=e.theme,a=e.count,c=e.callbackFn;n("UPDATE_DATA_LOADING",!0);var r=o.themeTags,i=o.themeId,s={dataType:"all",top:a,tags:r,select:["Picture","Position"]};Y(s,(function(t){n("UPDATE_THEME_DATA_LIST",{index:i,dataList:t}),n("UPDATE_DATA_LOADING",!1),c&&c()}),(function(t){n("UPDATE_DATA_LOADING",!1),c&&c(),console.log("getThemeDataList: ".concat(t))}))},getSingleTypeThemeDataList:function(t,e){var n=t.commit;n("UPDATE_DATA_LOADING",!0);var o=q(e),a=this.state.themes,c=new Array;for(var r in a)c[c.length]=o({tags:a[r].themeTags,select:["Picture"]});Promise.all(c).then((function(t){t.map((function(t,e){var o=t.data.map((function(t){return Object(C["c"])(t)})),a=o.map((function(t){return t["".concat(Object(C["e"])(t),"ID")]}));Object(O["k"])({ids:a}).then((function(t){var a=Object(C["a"])(o,t.data.average_scores);n("UPDATE_THEME_DATA_LIST",{index:e+1,dataList:a}),n("UPDATE_DATA_LOADING",!1)}))}))})).catch((function(t){n("UPDATE_DATA_LOADING",!1),console.log("getSingleTypeThemeDataList: ".concat(t))}))}},modules:{serverModule:W,otherModule:tt}},nt=(n("6cc5"),n("2b27")),ot=n.n(nt),at=n("c9bf"),ct=function(){return new Promise((function(){window.fbAsyncInit=function(){var t=window.FB;t.init({appId:"630396504836897",cookie:!0,xfbml:!0,version:"v8.0"})},function(t,e,n){var o,a=t.getElementsByTagName(e)[0];t.getElementById(n)||(o=t.createElement(e),o.id=n,o.src="https://connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(o,a))}(document,"script","facebook-jssdk")}))};o["a"].use(P["a"]);var rt=new P["a"]({linkExactActiveClass:"active",linkActiveClass:"active",base:"/f2e-tourist-frontend/",mode:"history",routes:L});o["a"].use(g["a"]);var it=new g["a"].Store(et);o["a"].use(ot.a);var st={clientId:"540286281483-tp520gmv9pi2aq3dogcju7jqmhvb1udl.apps.googleusercontent.com",scope:"profile email",prompt:"select_account"};o["a"].use(at["a"],st),o["a"].config.productionTip=!1,o["a"].prototype.window=window;var ut=new o["a"]({router:rt,store:it,render:function(t){return t(y)}}).$mount("#app");ct().then(ut),rt.beforeEach((function(t,e,n){if(t.matched.some((function(t){return t.meta.requiresAuth})))if(t.name.includes("admin")){var o=ut.$cookies.get("_a"),a={auth_token:o};Object(O["e"])(a).then((function(){n()})).catch((function(){ut.delete_cookie("_a","/","localhost"),n({name:"admin-login"})}))}else if(t.name.includes("suppliers")){var c=ut.$cookies.get("_s"),r={auth_token:c};Object(O["f"])(r).then((function(){n()})).catch((function(){ut.delete_cookie("_s","/","localhost"),n({name:"supplier-login"})}))}else n();else"scenicspots"!==t.name&&"restaurants"!==t.name&&"hotels"!==t.name&&"activities"!==t.name&&"search"!==t.name||(ut.$store.commit("INIT_DATA_QUERY"),ut.$store.commit("otherModule/TOGGLE_MAP_MODE",!1)),n()}));var dt="https://f2e-tourist-backend.herokuapp.com";function lt(t){return document.cookie.split(";").some((function(e){return e.trim().startsWith(t+"=")}))}o["a"].domain=dt,o["a"].prototype.delete_cookie=function(t,e,n){lt(t)&&(document.cookie=t+"="+(e?";path="+e:"")+(n?";domain="+n:"")+";expires=Thu, 01 Jan 1970 00:00:01 GMT")}},"5b0d":function(t,e,n){t.exports=n.p+"img/food-marker.5bee6c0b.svg"},6119:function(t,e,n){t.exports=n.p+"img/food-o.6b4cff0f.svg"},"617a":function(t,e,n){t.exports=n.p+"img/tour-o.ad593a2a.svg"},"662b":function(t,e,n){t.exports=n.p+"img/twitter.e029bfb8.svg"},"76ce":function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));n("e9c4"),n("fb6a"),n("d3b7"),n("d81d"),n("99af");var o=function(t){return JSON.parse(JSON.stringify(t))},a=function(t){return t.ScenicSpotID?"ScenicSpot":t.RestaurantID?"Restaurant":t.HotelID?"Hotel":t.ActivityID?"Activity":null},c=function(t){var e=t.slice(0,2);switch(e){case"C1":return"ScenicSpot";case"C2":return"Activity";case"C3":return"Restaurant";case"C4":return"Hotel";default:return null}},r=function(t){var e=a(t);return t.Type=e,t.ID=t["".concat(e,"ID")],t.Name=t["".concat(e,"Name")],t},i=function(t){return t.reduce((function(t,e){return e.data.map((function(t){return r(t)})),t.concat(e.data)}),[])},s=function(t,e){return t.map((function(t){var n=a(t);return e.map((function(e){e.id===t["".concat(n,"ID")]&&(t.CommentScore=e.average_score)})),r(t)}))}},"869d":function(t,e,n){"use strict";n("2c02")},"95e3":function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return p}));n("99af");var o=n("e11e"),a=n.n(o),c=n("2dd0"),r=n.n(c),i=n("5b0d"),s=n.n(i),u=n("478d"),d=n.n(u),l=n("b8e0"),f=n.n(l),h=n("76ce"),m=function(t){var e=Object(h["f"])(t),n=function(t){switch(t){case"ScenicSpot":return r.a;case"Activity":return r.a;case"Restaurant":return s.a;case"Hotel":return d.a;default:return null}};return a.a.icon({iconUrl:n(e),iconSize:[32,40],iconAnchor:[16,40]})},p=function(t){return'\n  <div class="card-img">\n    <img\n      style="width: 100%;"\n      src="'.concat(t.Picture&&t.Picture.PictureUrl1?t.Picture.PictureUrl1:f.a,'"\n      alt="').concat(t.Picture&&t.Picture.PictureDescription1?t.Picture.PictureDescription1:"no-image",'">\n    <h5 class="card-content-title">').concat(t.Name,"</h5>\n  </div>\n  ")}},9611:function(t,e,n){},9748:function(t,e,n){t.exports=n.p+"img/search-m.3759b975.svg"},b612:function(t,e,n){t.exports=n.p+"img/bed-o.d8432e38.svg"},b8e0:function(t,e){t.exports="data:image/png;base64,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"},c2cd:function(t,e,n){"use strict";n("9611")},cd06:function(t,e,n){t.exports=n.p+"img/facebook.e7b04c85.svg"},d4ab:function(t,e,n){t.exports=n.p+"img/line.1532ba3c.svg"},e287:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:t.className},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.localKeyword,expression:"localKeyword"}],staticClass:"keyword",attrs:{type:"text",placeholder:"想要去哪？"},domProps:{value:t.localKeyword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearch.apply(null,arguments)},input:function(e){e.target.composing||(t.localKeyword=e.target.value)}}}),o("div",{on:{click:t.goSearch}},[o("img",{attrs:{src:n("021d"),alt:"搜尋"}})])])},a=[],c=n("5530"),r=n("2f62"),i={props:["className"],computed:Object(c["a"])({localKeyword:{get:function(){return this.keyword},set:function(t){this.$store.commit("UPDATE_KEYWORD",t)}}},Object(r["b"])(["keyword"])),methods:{goSearch:function(t){!t.isComposing&&this.keyword&&(this.$store.dispatch("getAllTypeDataListWithKeyword",this.keyword),this.$router.push("/search?keyword=".concat(this.keyword)))}}},s=i,u=(n("039b"),n("2877")),d=Object(u["a"])(s,o,a,!1,null,"b1da1878",null);e["a"]=d.exports},e347:function(t,e,n){t.exports=n.p+"img/logo.e12a66c5.svg"},ee3c:function(t,e,n){t.exports=n.p+"img/footer-logo.92eb0eeb.svg"}});
//# sourceMappingURL=app.0656024c.js.map